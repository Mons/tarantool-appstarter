# {{__appname__}}

## Запуск
* `make dep` - Установит зависимости в папку ./libs
* `make run` - Запустит тарантул в деве в папке ./tnt
* `make test` - Запускает тесты

## Зависимости
В состав приложения входит скрипт `dep.py`, задача которого - установить зависимости из мета-файла `meta.yaml`. `dep.py` внутри зовет luarocks, поэтому последний должен быть установлен в системе.

Идея - создавать "виртуальное окружение", наподобие python virtualenv.

`dep.py --help` - покажет возможности скрипта

Основные моменты:

* `./dep.py --meta-file=./meta.yaml` - установит завиимости в глобальный luarocks из файла `meta.yaml`.
* `./dep.py --meta-file=./meta.yaml --dev` - установит зависимости в локальный luarocks (по умолчанию в `~/.luarocks`).
* `./dep.py --meta-file=./meta.yaml --luarocks-tree=./libs` - установит все завиимости в конкретную папку (здесь - libs).

Файл `init.lua` поддерживает внутри себя расширение package.path папкой `libs`, лежащей рядом с `init.lua`, поэтому, для разработки достаточно выполнить команду
```bash
./dep.py --meta-file=./meta.yaml --luarocks-tree=./libs
```
и можно уже запускать `./run.sh` (или `make run`), что стартанет тарантул в папке `./tnt`.

## RPM
При установке RPM получается следующая структура:
```
/
├── etc
│   └── {{__appname__}}
│       └── conf.lua
└── usr
    └── share
        └── {{__appname__}}
            ├── init.lua
            ├── app/
            └── libs/
```
